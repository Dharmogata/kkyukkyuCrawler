# 뀨뀨 크롤러(kkyukkyuCrawler)
> 강의안에서 판례요지 따기를 손쉽게!

뀨뀨 크롤러는 PDF 강의안의 판례번호(예: 1234다12345)를 자동으로 인식해서 [casenote](https://casenote.kr/)로부터 해당 판례를 검색한 후, 
판례 정보를 긁어다가 txt 파일로 만들어주는 파이썬 라이브러리입니다.

판례를 찾아다니는 시간을 아껴 윤택한 로스쿨 생활을 해보아요!

## 설치
### 의존성
뀨뀨 크롤러의 요구사항은 다음과 같습니다:
- python (>=3.10)
- PyPDF2 (>=3.0.1)
- tqdm (>=4.65)
- beautifulsoup4 (>=4.12.2)

사실 파이썬3인 이상 버전은 조금 더 낮아도 될 것 같은데(시험해보지는 않음) 파이썬2는 안됩니다.

### 설치법
가장 쉬운 방법은 `pip`을 이용하는 방식입니다:

```commandline
    pip install kkyukkyuCrawler
```

아니면 git repo를 클론해서 가져다 써도 됩니다:

```commandline
    git clone https://github.com/eik4862/kkyukkyuCrawler.git
```

## 사용법 - 기초
`extract_and_export` 메소드에 입력할 PDF의 경로(`in.pdf`)와 출력할 txt의 경로(`out.txt`)를 넘겨주면 끝! 
당연히 PDF 경로가 유효하지 않으면 에러가 나고, 출력할 경로에 이미 해당 파일이 있는 경우에는 **경고 없이 덮어쓰기가 되니 주의해주세요.**

```python
    import kkyukkyuCrawler as kc
    kc.extract_and_export('in.pdf', 'out.txt')
```

## 사용법 - 심화
~~이 부분은 굳이 읽을 필요는 없는데~~ 혹시 호기심이 있는 분들이 있으실까봐... 뀨뀨 크롤러가 제공하는 클래스와 함수는 다음과 같습니다:
- `Case` 클래스
- `extract_id` 함수
- `search` 함수
- `export` 함수
- `extract_and_export` 함수

이하에서 각각에 대해 조금 더 자세히 살펴보도록 하겠습니다(개발자나 볼법한 디테일은 코드 주석에 있으니 참고 바랍니다).

### Case 클래스
#### 필드
|     필드      |      타입       | 설명                                         |
|:-----------:|:-------------:|--------------------------------------------|
|    `id`     | list of `str` | 판례 ID(예: 1234다12345)                       |
| `ref_pg_no` | list of `int` | 판례 ID가 등장한 PDF 면수                          |
|   `title`   |     `str`     | 판례제목(예: 대법원 2023. 6. 19. 선고 1234다12345 판결) |
|  `issues`   | list of `str` | 판시/결정사항                                    |
| `summaries` |    list of `str`   | 판결/결정요지                                    |
|  `results`  |    list of `str`     | 주문                                         |
|  `claims`   |   list of `str`     | 청구/항소/반소 등 취지                              |
|  `reasons`  |    list of `str`    | 이유                                         |
|    `src`    |     `str`     | 판례를 찾은 casenote URL                        |

#### 생성자
|    파라미터     |  타입   | 설명                                               |
|:-----------:|:-----:|--------------------------------------------------|
|    `_id`    | `str` | 판례 ID(예: 1234다12345)                      |
| `ref_pg_no` | `int` | 판례 ID가 등장한 PDF 면수     |

`Case` 클래스는 판례정보를 담기 위한 간단한 컨테이너입니다.
다음 예시는 강의안 10면에 있는 92다23285 판례를 casenote에서 검색하여 그 값을 stdout으로 출력하는 예시입니다.
이 예시는 이해를 돕기 위한 예시일 뿐, 현실적인 이용은 아님에 유의해주세요.

```python
    import kkyukkyuCrawler as kc
    case = kc.Case('92다23285', 10)  # 강의안 10면에 있는 92다23285 판례
    kc.search([case])  # casenote에서 92다23285를 검색(Case 객체의 내부정보가 업데이트됨)
    print(case)
    """
    >>> @title: 대법원 1992. 12. 11. 선고 92다23285 판결
    >>> @issues
    >>>   가. 이른바 실효의 원칙을 적용하기 위한 판단기준
    >>>   나. 근로자들이 면직 후 바로 아무런 이의 없이 퇴직금을 수령하였으며 그로부터 ...
    >>>   다. 위 "나"항의 경우 사용자의 보상규정에 해직자 중 복직희망자는 사용자측이 ...
    >>> @summaries
    >>>   가. 이른바 실효의 원칙이 적용되기 위하여 필요한 요건으로서의 실효기간 ...
    >>>   나. 근로자들이 면직 후 바로 아무런 이의 없이 퇴직금을 수령하였으며 그로부터 ...
    >>>   다. 위 “나”항의 경우 사용자의 보상규정에 해직자 중 복직희망자는 사용자측이 ...
    >>> @results
    >>>   원심판결 중 피고 패소부분을 파기하고 이 부분 사건을 서울고등법원에 환송한다.
    >>> @reasons
    >>>   피고 소송대리인의 상고이유에 대하여
    >>>   원심판결 이유에 의하면, 원심은 원고들이 1980.7. 경 국가보위비상대책위원회가 ...
    >>>   ...
    >>> @src: https://casenote.kr/%EB%8C%80%EB%B2%95%EC%9B%90/92%EB%8B%A423285
    """
```

### extract_id 함수
#### 입력

|    파라미터    |   타입    | 설명                                               |
|:----------:|:-------:|--------------------------------------------------|
|   `path`   |  `str`  | 읽을 PDF의 절대/상대경로                                  |
| `verbose`  | `bool`  | 만약 `True`이면 stdout으로 구체적인 리포트를 합니다(기본값: `False`) |

#### 출력
|       타입       | 설명 |
|:--------------:|---|
| list of `Case` | PDF에서 추출해낸 판례 ID(예: 1234다12345)를 담고 있는 `Case` 오브젝트의 리스트 |

`extract_id` 함수는 PDF 파일을 입력받아 판례 ID를 추출합니다.
추출된 판례 ID는 `Case` 컨테이너에 담겨 리스트로 리턴됩니다.


#### search 함수
|   파라미터    |      타입       | 설명                                               |
|:---------:|:-------------:|--------------------------------------------------|
|  `cases`  | list of `str` | 검색할 판례 ID를 가진 `Case` 오브젝트의 리스트                   |
| `verbose` |    `bool`     | 만약 `True`이면 stdout으로 구체적인 리포트를 합니다(기본값: `False`) |


#### export 함수

#### extract_and_export 함수

## 개발
뀨뀨 크롤러는 각잡고 영리목적으로 만든 게 아닙니다. 따라서 자잘한 버그가 있을수도 있고, 엉성한 부분이 있을수도 있습니다. 
귀엽게 봐주시면 되겠습니다.

- 버그 리포트: lkd1962@naver.com

뀨뀨 크롤러는 MIT 라이선스로 자유롭게 활용이 가능합니다(영리목적도 가능). 
이 라이브러리 코드를 기초로 뭔가 다른 걸 해보고 싶다면 얼마든지 환영입니다! 
코드는 [github](https://github.com/eik4862/kkyukkyuCrawler.git)에 있습니다. 
docstring을 열심히 달아뒀으니 참고하시면 되겠습니다.